<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 450">
  <defs>
    <linearGradient id="headerGrad3" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#234375;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3a5a8a;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow3" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1100" height="450" fill="#f8fafc"/>
  
  <!-- Title -->
  <rect x="0" y="0" width="1100" height="50" fill="url(#headerGrad3)"/>
  <text x="550" y="32" font-family="Segoe UI, Arial, sans-serif" font-size="22" font-weight="600" fill="white" text-anchor="middle">Example: Processing a Geographic Question</text>
  
  <!-- User Query Box -->
  <rect x="50" y="80" width="300" height="80" rx="12" fill="#234375" filter="url(#shadow3)"/>
  <text x="70" y="105" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#a0b8d8">User asks:</text>
  <text x="200" y="135" font-family="Georgia, serif" font-size="18" fill="white" text-anchor="middle" font-style="italic">"What cafés are near</text>
  <text x="200" y="155" font-family="Georgia, serif" font-size="18" fill="white" text-anchor="middle" font-style="italic">Cardiff Castle?"</text>
  
  <!-- Arrow 1 -->
  <path d="M350 120 L400 120" stroke="#234375" stroke-width="3" fill="none"/>
  <polygon points="410,120 395,112 395,128" fill="#234375"/>
  
  <!-- Step 1: Query Analysis -->
  <rect x="420" y="70" width="280" height="100" rx="10" fill="#e3eaff" stroke="#234375" stroke-width="2" filter="url(#shadow3)"/>
  <text x="560" y="95" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="#234375" text-anchor="middle">1. Query Understanding</text>
  <line x1="440" y1="105" x2="680" y2="105" stroke="#234375" stroke-width="1" opacity="0.3"/>
  <text x="450" y="125" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#3a5a8a">• Intent: Location search</text>
  <text x="450" y="142" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#3a5a8a">• Place: "Cardiff Castle"</text>
  <text x="450" y="159" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#3a5a8a">• Relation: "near" (proximity)</text>
  <text x="570" y="125" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#3a5a8a">• Target: "cafés"</text>
  <text x="570" y="142" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#3a5a8a">• Category: Food &amp; Drink</text>
  
  <!-- Arrow 2 -->
  <path d="M700 120 L750 120" stroke="#234375" stroke-width="3" fill="none"/>
  <polygon points="760,120 745,112 745,128" fill="#234375"/>
  
  <!-- Step 2: Spatial Interpretation -->
  <rect x="770" y="70" width="280" height="100" rx="10" fill="#fff8e8" stroke="#c9a227" stroke-width="2" filter="url(#shadow3)"/>
  <text x="910" y="95" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="#8b6914" text-anchor="middle">2. Spatial Interpretation</text>
  <line x1="790" y1="105" x2="1030" y2="105" stroke="#c9a227" stroke-width="1" opacity="0.3"/>
  <text x="800" y="125" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#a07d1a">• "Near" → within ~500m radius?</text>
  <text x="800" y="142" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#a07d1a">• Cardiff Castle → coordinates</text>
  <text x="800" y="159" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#a07d1a">• Context: urban setting</text>
  
  <!-- Challenges Box -->
  <rect x="50" y="200" width="200" height="120" rx="10" fill="#ffe8e8" stroke="#c94a4a" stroke-width="2" filter="url(#shadow3)"/>
  <text x="150" y="225" font-family="Segoe UI, Arial, sans-serif" font-size="13" font-weight="600" fill="#8b2d2d" text-anchor="middle">Challenges for LLMs</text>
  <line x1="70" y1="235" x2="230" y2="235" stroke="#c94a4a" stroke-width="1" opacity="0.3"/>
  <text x="70" y="255" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#a04040">• What does "near" mean?</text>
  <text x="70" y="272" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#a04040">• Current café data accuracy?</text>
  <text x="70" y="289" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#a04040">• Spatial reasoning needed</text>
  <text x="70" y="306" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#a04040">• Risk of hallucination</text>
  
  <!-- Step 3: Knowledge Retrieval -->
  <rect x="280" y="200" width="250" height="120" rx="10" fill="#e8ffe8" stroke="#3d8b3d" stroke-width="2" filter="url(#shadow3)"/>
  <text x="405" y="225" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="#2d6a2d" text-anchor="middle">3. Knowledge Retrieval</text>
  <line x1="300" y1="235" x2="510" y2="235" stroke="#3d8b3d" stroke-width="1" opacity="0.3"/>
  <text x="300" y="255" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#3d7a3d">Query geographic KB:</text>
  <text x="310" y="275" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#3d7a3d">• OSM / Google Places</text>
  <text x="310" y="292" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#3d7a3d">• Local business directories</text>
  <text x="310" y="309" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#3d7a3d">• Verified location data</text>
  
  <!-- Step 4: Spatial Reasoning -->
  <rect x="560" y="200" width="250" height="120" rx="10" fill="#f0e8ff" stroke="#6b4a9e" stroke-width="2" filter="url(#shadow3)"/>
  <text x="685" y="225" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="#4a2d7a" text-anchor="middle">4. Spatial Reasoning</text>
  <line x1="580" y1="235" x2="790" y2="235" stroke="#6b4a9e" stroke-width="1" opacity="0.3"/>
  <text x="580" y="255" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#5a3d8a">Calculate &amp; filter:</text>
  <text x="590" y="275" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#5a3d8a">• Distance from castle</text>
  <text x="590" y="292" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#5a3d8a">• Walking accessibility</text>
  <text x="590" y="309" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#5a3d8a">• Rank by proximity</text>
  
  <!-- Step 5: Answer Generation -->
  <rect x="840" y="200" width="210" height="120" rx="10" fill="#e3eaff" stroke="#234375" stroke-width="2" filter="url(#shadow3)"/>
  <text x="945" y="225" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="#234375" text-anchor="middle">5. Answer Synthesis</text>
  <line x1="860" y1="235" x2="1030" y2="235" stroke="#234375" stroke-width="1" opacity="0.3"/>
  <text x="860" y="255" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#3a5a8a">Generate response:</text>
  <text x="870" y="275" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#3a5a8a">• Natural language</text>
  <text x="870" y="292" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#3a5a8a">• Ranked results</text>
  <text x="870" y="309" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#3a5a8a">• Distance info</text>
  
  <!-- Final Answer Box -->
  <rect x="250" y="350" width="600" height="80" rx="12" fill="#234375" filter="url(#shadow3)"/>
  <text x="280" y="375" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#a0b8d8">Generated Answer:</text>
  <text x="550" y="400" font-family="Georgia, serif" font-size="14" fill="white" text-anchor="middle" font-style="italic">"There are several cafés near Cardiff Castle: Coffee #1 (100m, High Street),</text>
  <text x="550" y="420" font-family="Georgia, serif" font-size="14" fill="white" text-anchor="middle" font-style="italic">Starbucks (150m, Queen Street), and Waterloo Tea (200m, Womanby Street)."</text>
  
  <!-- Arrows connecting steps -->
  <path d="M405 170 L405 200" stroke="#3d8b3d" stroke-width="2"/>
  <polygon points="405,200 400,190 410,190" fill="#3d8b3d"/>
  
  <path d="M530 260 L560 260" stroke="#6b4a9e" stroke-width="2"/>
  <polygon points="560,260 550,255 550,265" fill="#6b4a9e"/>
  
  <path d="M810 260 L840 260" stroke="#234375" stroke-width="2"/>
  <polygon points="840,260 830,255 830,265" fill="#234375"/>
  
  <path d="M945 320 L945 340 L550 340 L550 350" stroke="#234375" stroke-width="2" fill="none"/>
  <polygon points="550,350 545,340 555,340" fill="#234375"/>
</svg>
